# This is a config file for the automatic build process of FhGFS client kernel
# modules.
# http://www.fhgfs.com


#
# --- Section: [Notes] ---
#

# General Notes
# =============
# To force a rebuild of the client modules:
#  $ /etc/init.d/fhgfs-client rebuild
#
# To see a list of available build arguments:
#  $ make help -C /opt/fhgfs/src/client/fhgfs_client_module/build


# Infiniband Notes
# ================
# If you want to build with native Infiniband support, add
# "FHGFS_OPENTK_IBVERBS=1" to the "buildArgs" below.
#
# If you installed IB kernel modules from OFED, then also define the
# correspsonding include path by adding "OFED_INCLUDE_PATH=<path>" to the
# "buildArgs" (where <path> is usually "/usr/src/ofa_kernel/include").


#
# --- Section: [Build Settings] ---
#

# Build Settings
# ==============
# These are the arguments for the client module "make" command.
#
# Note: Quotation marks and equal signs can be used without escape characters
# here.
#
# Example1:
#  buildArgs=-j8 FHGFS_OPENTK_IBVERBS=1
#
# Example2 (see Infiniband notes above):
#  buildArgs=-j8 FHGFS_OPENTK_IBVERBS=1 OFED_INCLUDE_PATH=/usr/src/ofa_kernel/include
#
# Default:
#  buildArgs=-j8

<% if @with_infiniband.to_s == 'true' -%>
buildArgs=-j8 FHGFS_OPENTK_IBVERBS=1
<% else -%>
buildArgs=-j8
<% end -%>


# Turn Autobuild on/off
# =====================
# Controls whether modules will be built on "/etc/init.d/fhgfs-client start".
#
# Note that even if autobuild is enabled here, the modules will only be built
# if no fhgfs kernel module for the current kernel version exists in
# "/lib/modules/<kernel_version>/updates/".
#
# Default:
#  buildEnabled=true

buildEnabled=true
